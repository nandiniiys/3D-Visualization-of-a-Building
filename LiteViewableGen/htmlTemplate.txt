<!doctype html>
<html lang="en">
<head>
$tab$<meta charset="utf-8">
$tab$<title>3D Visualization of a building</title>
$tab$<style>
$tab$$tab$#myNavCubeCanvas {
$tab$$tab$$tab$position: absolute;
$tab$$tab$$tab$width: 250px;
$tab$$tab$$tab$height: 250px;
$tab$$tab$$tab$bottom: 50px;
$tab$$tab$$tab$right: 10px;
$tab$$tab$$tab$z-index: 200000;
$tab$$tab$}
$tab$$tab$#myCanvas {
$tab$$tab$$tab$width: 100%;
$tab$$tab$$tab$height: 100%;
$tab$$tab$$tab$background: black;
$tab$$tab$}

$tab$$tab$body {
$tab$$tab$$tab$background-color:#000;
$tab$$tab$$tab$overflow: hidden !important;
$tab$$tab$}

$tab$$tab$#title {
$tab$$tab$$tab$color: white;
$tab$$tab$$tab$font-size: 2em;
$tab$$tab$}

$tab$$tab$#summary {
$tab$$tab$$tab$color: white;
$tab$$tab$$tab$font-size: 1em;
$tab$$tab$$tab$display: inline;
$tab$$tab$}

$tab$$tab$#arrow-right {
$tab$$tab$$tab$color: #00FF00;
$tab$$tab$$tab$font-size: 1.2em;
$tab$$tab$$tab$display: inline;
$tab$$tab$}

$tab$$tab$.tooltip {
$tab$$tab$$tab$color: white;
$tab$$tab$$tab$position: relative;
$tab$$tab$$tab$display: inline-block;
$tab$$tab$$tab$font-size: 1.5em;
$tab$$tab$$tab$border-bottom: 5px double #00FF00;
$tab$$tab$$tab$border-top: 5px double #00FF00;
$tab$$tab$$tab$border-left: 5px double #00FF00;
$tab$$tab$$tab$border-right: 5px double #00FF00;
$tab$$tab$}

$tab$$tab$.tooltip .tooltiptext {
$tab$$tab$$tab$visibility: hidden;
$tab$$tab$$tab$width: 350px;
$tab$$tab$$tab$background-color: #555;
$tab$$tab$$tab$color: white;
$tab$$tab$$tab$text-align: center;
$tab$$tab$$tab$border-radius: 6px;
$tab$$tab$$tab$padding: 5px 0;
$tab$$tab$$tab$position: absolute;
$tab$$tab$$tab$z-index: 1;
$tab$$tab$$tab$bottom: 125%;
$tab$$tab$$tab$left: 50%;
$tab$$tab$$tab$margin-left: -60px;
$tab$$tab$$tab$opacity: 0;
$tab$$tab$$tab$transition: opacity 0.3s;
$tab$$tab$}

$tab$$tab$.tooltip .tooltiptext::after {
$tab$$tab$$tab$content: "";
$tab$$tab$$tab$position: absolute;
$tab$$tab$$tab$top: 100%;
$tab$$tab$$tab$left: 50%;
$tab$$tab$$tab$margin-left: -5px;
$tab$$tab$$tab$border-width: 5px;
$tab$$tab$$tab$border-style: solid;
$tab$$tab$$tab$border-color: #555 transparent transparent transparent;
$tab$$tab$}

$tab$$tab$.tooltip:hover .tooltiptext {
$tab$$tab$$tab$visibility: visible;
$tab$$tab$$tab$opacity: 1;
$tab$$tab$}

$tab$</style>

</head>

<body>
<div id="Project Information">
$tab$<h1 id="title">3D Visualization of a building</h1>
$tab$<h1 id="summary">
$tab$$tab$<p>
$tab$$tab$$tab$This 3D interactive model was generated by running the 2D to 3D building transformation pipeline <br>
$tab$$tab$$tab$ on the floorplans of our dataset:
$tab$$tab$</p>
$tab$</h1>
</div>
<br>
<div class="tooltip">2D data to 3D data
  <span class="tooltiptext">Used Autodesk Revit to create 3D floorplans as IFC files from the 2D blueprints.</span>
</div>

&emsp;
<h1 id="arrow-right"> --------> </h1>
&emsp;

<div class="tooltip">IFC to XKT & JSON
  <span class="tooltiptext">Converted the IFC files to Xeokit's proprietary XKT file format and extracted metadata as JSON files.</span>
</div>

&emsp;
<h1 id="arrow-right"> --------> </h1>
&emsp;
<div class="tooltip">Load the models in browser
  <span class="tooltiptext">Ran a Python script that combines Xeokit SDK's functionality to load the 3D models, and HTML, Javascript and ThreeJS to create this webpage.</span>
</div>

<canvas id="myCanvas" width="256" height="650"></canvas>
<canvas id="myNavCubeCanvas"></canvas>
</body>

<script src="https://threejs.org/examples/js/libs/dat.gui.min.js" type="text/javascript"></script>
<script>
$tab$window.onload = function() {
        controller = {                                                   
          // console.log("controller");
          "Project Paper" : function() {
          $tab$window.open('https://github.com/nandiniiys/3D-Visualization-of-a-Building/<add-paper-link-here>')
          },
          "Github Project Repo" : function() {
          $tab$window.open('https://github.com/nandiniiys/3D-Visualization-of-a-Building/')
          },
          "Nandinii Github" : function() {
          $tab$window.open('https://github.com/nandiniiys/')
          },
          "Daniel Website" : function() {
          $tab$window.open('https://danielhaehn.com')
          }
        };
$tab$$tab$ //console.log("before");
        var gui = new dat.GUI();
        var info = gui.addFolder('Project Information');
        info.add(controller, 'Project Paper');
        info.add(controller, 'Github Project Repo');
        info.add(controller, 'Nandinii Github');
        info.add(controller, 'Daniel Website');
        info.open()
        
        //console.log("after");
        animate()
$tab$};
</script>

<script type="module">

$tab$//------------------------------------------------------------------------------------------------------------------
$tab$// Import needed modules to load XKT models
$tab$//------------------------------------------------------------------------------------------------------------------

$tab$import {Viewer} from "./src/viewer/Viewer.js";
$tab$import {XKTLoaderPlugin} from "./src/plugins/XKTLoaderPlugin/XKTLoaderPlugin.js";
$tab$$tab$import {NavCubePlugin} from "./src/plugins/NavCubePlugin/NavCubePlugin.js";


$tab$//------------------------------------------------------------------------------------------------------------------
$tab$// Create a Viewer and the arrange the camera positioning
$tab$//------------------------------------------------------------------------------------------------------------------

$tab$const viewer = new Viewer({
$tab$$tab$canvasId: "myCanvas",
$tab$$tab$transparent: true
$tab$});

$tab$viewer.scene.camera.eye = [10.45, 17.38, -98.31];
$tab$viewer.scene.camera.look = [43.09, 0.5, -26.76];
$tab$viewer.scene.camera.up = [0.06, 0.96, 0.16];

$tab$viewer.scene.selectedMaterial.fillAlpha = 0.1;

$tab$new NavCubePlugin(viewer, {
$tab$$tab$canvasId: "myNavCubeCanvas",
$tab$$tab$visible: true,
$tab$$tab$size: 250,
$tab$$tab$alignment: "bottomRight",
$tab$$tab$bottomMargin: 100,
$tab$$tab$rightMargin: 10
$tab$});

$tab$//----------------------------------------------------------------------------------------------------------------------
$tab$// Create an XKT loader plugin using the viewer we created earlier
$tab$//----------------------------------------------------------------------------------------------------------------------

$tab$const xktLoader = new XKTLoaderPlugin(viewer);

$tab$//------------------------------------------------------------------------------------------------------------------
$tab$// Mouse over entities to highlight them
$tab$//------------------------------------------------------------------------------------------------------------------

$tab$var lastEntity = null;

$tab$viewer.scene.input.on("mousemove", function (coords) {
  
$tab$$tab$var hit = viewer.scene.pick({
$tab$$tab$$tab$canvasPos: coords
$tab$$tab$});

$tab$$tab$if (hit) {

$tab$$tab$$tab$if (!lastEntity || hit.entity.id !== lastEntity.id) {

$tab$$tab$$tab$$tab$if (lastEntity) {
$tab$$tab$$tab$$tab$$tab$lastEntity.highlighted = false;
$tab$$tab$$tab$$tab$}

$tab$$tab$$tab$$tab$lastEntity = hit.entity;
$tab$$tab$$tab$$tab$hit.entity.highlighted = true;
$tab$$tab$$tab$}
$tab$$tab$} else {

$tab$$tab$$tab$if (lastEntity) {
$tab$$tab$$tab$$tab$lastEntity.highlighted = false;
$tab$$tab$$tab$$tab$lastEntity = null;
$tab$$tab$$tab$}
$tab$$tab$}
$tab$});


//Use the xktLoader to load data on all teh floors in the building.